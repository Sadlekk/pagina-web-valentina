<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine Pixel Quest</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* Estilos Base y Reset */
        * { box-sizing: border-box; }
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Press Start 2P', cursive;
            background-color: #1a0b2e;
            touch-action: manipulation; /* Evita zoom accidental en móviles */
        }

        /* Pantalla 1: Título */
        #screen-title {
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; height: 100vh; color: #ff4d6d;
            text-shadow: 3px 3px #000; transition: opacity 0.8s ease;
            position: relative; z-index: 20; padding: 20px;
        }

        h1 { font-size: clamp(1.2rem, 8vw, 3.5rem); color: #ff85a1; text-align: center; line-height: 1.4; }
        .blink { font-size: clamp(0.6rem, 3vw, 0.9rem); color: #fff; animation: blinker 1s linear infinite; margin-top: 40px; cursor: pointer; text-align: center; }
        @keyframes blinker { 50% { opacity: 0; } }

        /* Corazones */
        .heart {
            position: absolute; top: -30px; color: #ff0000; font-size: clamp(15px, 5vw, 25px);
            pointer-events: none; animation: fall linear forwards; z-index: 15;
        }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        /* Pantalla 2: El Gato y Fondo */
        #screen-cat {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(26, 11, 46, 0.6), rgba(26, 11, 46, 0.6)), 
                        url('https://img.freepik.com/free-vector/pixel-art-night-sky-background_52683-120531.jpg') no-repeat center center;
            background-size: cover; flex-direction: column; align-items: center;
            justify-content: center; opacity: 0; transition: opacity 1s ease;
            padding: 20px;
        }

        .cat-container { position: relative; width: 100%; height: 150px; z-index: 10; display: flex; justify-content: center; }
        .cat {
            position: absolute; bottom: 0; width: clamp(100px, 30vw, 150px); 
            image-rendering: pixelated; transition: left 1.5s cubic-bezier(0.45, 0.05, 0.55, 0.95);
        }
        .cat.running { left: 150%; }

        /* Ventana de Pregunta */
        #valentine-modal {
            display: none; position: relative; z-index: 30;
            background: #000; border: 4px solid #ff4d6d;
            padding: clamp(15px, 5vw, 30px); text-align: center; color: white;
            box-shadow: 6px 6px 0px rgba(0,0,0,0.5);
            width: 90%; max-width: 400px;
        }

        .question { font-size: clamp(0.7rem, 4vw, 0.9rem); margin-bottom: 25px; line-height: 1.6; }
        .btn-container { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }

        button {
            font-family: 'Press Start 2P', cursive;
            padding: 12px 20px; border: none; cursor: pointer;
            font-size: clamp(0.6rem, 3vw, 0.8rem); outline: none;
            box-shadow: 4px 4px 0px #333;
        }
        button:active { transform: translate(2px, 2px); box-shadow: 2px 2px 0px #333; }

        .btn-yes { background-color: #4ade80; color: #000; }
        .btn-no { background-color: #f87171; color: #000; }

        /* CARTA FINAL */
        #final-letter {
            display: none; position: relative; z-index: 40;
            background: #fff; border: 6px double #ff4d6d;
            padding: clamp(20px, 6vw, 40px); text-align: center; color: #d63384;
            width: 90%; max-width: 450px;
            box-shadow: 10px 10px 0px #ff85a1;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .letter-text { font-size: clamp(0.55rem, 3.5vw, 0.75rem); line-height: 1.8; color: #333; margin-top: 15px; }
        .pixel-cat-final { width: clamp(60px, 20vw, 90px); margin-top: 20px; image-rendering: pixelated; }

        .hidden { display: none !important; }
        .visible { display: flex !important; opacity: 1 !important; }
    </style>
</head>
<body>

    <div id="screen-title">
        <h1>VALENTINE</h1>
        <div class="blink">TOCA PARA CONTINUAR</div>
    </div>

    <div id="screen-cat">
        <div class="cat-container" id="catBox">
            <img src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExanIwNmM4M3F1OHE4ZzZxZGljejFzbzB2MmtycWR1MG8yZ3BreWptdiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/1k1ytCiReJMZWVtjXd/giphy.gif" alt="Pixel Cat" class="cat" id="catSprite">
        </div>

        <div id="valentine-modal">
            <div class="question">¿QUIERES SER MI VALENTINE?</div>
            <div class="btn-container">
                <button class="btn-yes" onclick="celebrate()">SÍ</button>
                <button class="btn-no" onclick="alert('Intenta con el otro botón :3')">NO</button>
            </div>
        </div>

        <div id="final-letter">
            <div style="font-size: clamp(0.8rem, 5vw, 1.2rem);">❤️ GRACIAS ❤️</div>
            <div class="letter-text">
                Gracias por aceptar. <br>
                Eres la persona más especial <br>
                de mi mundo pixelado. <br>
                ¡Feliz San Valentín!
            </div>
            <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ3Z1bmZ4Ynd6eG82Z3R4eG54eHh4eHh4eHh4eHh4eHh4eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/X8yP6m5W6qWqP/giphy.gif" class="pixel-cat-final" alt="Happy Cat">
        </div>
    </div>

    <script>
        const titleScreen = document.getElementById('screen-title');
        const catScreen = document.getElementById('screen-cat');
        const catSprite = document.getElementById('catSprite');
        const modal = document.getElementById('valentine-modal');
        const letter = document.getElementById('final-letter');
        let transitioned = false;

        function createHeart() {
            if (transitioned && letter.style.display !== 'block') return;
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerText = '❤';
            heart.style.left = Math.random() * 90 + "vw";
            heart.style.animationDuration = Math.random() * 2 + 3 + "s";
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }
        setInterval(createHeart, 450);

        function startTransition() {
            if (transitioned) return;
            transitioned = true;
            titleScreen.style.opacity = '0';
            setTimeout(() => {
                titleScreen.classList.add('hidden');
                catScreen.classList.add('visible');
                setTimeout(() => {
                    catSprite.classList.add('running');
                    setTimeout(() => {
                        document.getElementById('catBox').classList.add('hidden');
                        modal.style.display = 'block';
                    }, 1500);
                }, 1500);
            }, 800);
        }

        function celebrate() {
            modal.style.display = 'none';
            letter.style.display = 'block';
            for(let i=0; i<15; i++) {
                setTimeout(createHeart, i * 150);
            }
        }

        // Soporte para PC y Móvil
        window.addEventListener('click', (e) => {
            if(!transitioned) startTransition();
        });
        window.addEventListener('keydown', () => {
            if(!transitioned) startTransition();
        });
    </script>
</body>

</html>
